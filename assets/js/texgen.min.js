// texgen.js - http://github.com/mrdoob/texgen.js
var TG={Texture:function(a,b){this.width=a;this.height=b;this.array=new Float32Array(a*b*4);return this}};
TG.Texture.prototype={constructor:TG.Texture,pass:function(a,b){void 0===b&&(b="");var c=a.getColor(),c=["var x = 0, y = 0;\nfor ( var i = 0, il = array.length; i < il; i += 4 ) {","\t"+a.getSource(),0!==c[0]?"\tarray[ i + 0 ] "+b+"= color * "+c[0]+";":"",0!==c[1]?"\tarray[ i + 1 ] "+b+"= color * "+c[1]+";":"",0!==c[2]?"\tarray[ i + 2 ] "+b+"= color * "+c[2]+";":"","\tif ( ++x === width ) { x = 0; y ++; }\n}"].join("\n");(new Function("array, width, height",c))(this.array,this.width,this.height);
return this},add:function(a){return this.pass(a,"+")},sub:function(a){return this.pass(a,"-")},mul:function(a){return this.pass(a,"*")},div:function(a){return this.pass(a,"/")},toCanvas:function(){var a=this.width,b=this.height,c=this.array,e=document.createElement("canvas");e.width=a;e.height=b;for(var f=e.getContext("2d"),a=f.createImageData(a,b),b=a.data,d=0,g=c.length;d<g;d+=4)b[d]=255*c[d],b[d+1]=255*c[d+1],b[d+2]=255*c[d+2],b[d+3]=255;f.putImageData(a,0,0);return e}};
TG.Program=function(a){var b=[1,1,1];a.color=function(a,e,f){b=[a,e,f];return this};a.getColor=function(){return b};return a};TG.Number=function(){return new TG.Program({getSource:function(){return"var color = 1;"}})};TG.SinX=function(){var a=1,b=0;return new TG.Program({frequency:function(b){a=b*Math.PI;return this},offset:function(a){b=a;return this},getSource:function(){return"var color = Math.sin( ( x + "+b+" ) * "+a+" );"}})};
TG.SinY=function(){var a=1,b=0;return new TG.Program({frequency:function(b){a=b*Math.PI;return this},offset:function(a){b=a;return this},getSource:function(){return"var color = Math.sin( ( y + "+b+" ) * "+a+" );"}})};TG.OR=function(){return new TG.Program({getSource:function(){return"var color = ( x | y ) / width;"}})};TG.XOR=function(){return new TG.Program({getSource:function(){return"var color = ( x ^ y ) / width;"}})};TG.Noise=function(){return new TG.Program({getSource:function(){return"var color = Math.random();"}})};
